for(var Convergence=function(a){var b=this;this.player=a,this.eyeLeft=this.player.querySelector('[data-eye="left"]'),this.eyeRight=this.player.querySelector('[data-eye="right"]'),this.outputs={min:null!==parseFloat(this.player.getAttribute("data-stereo-min"))?parseFloat(this.player.getAttribute("data-stereo-min")):-1,max:null!==parseFloat(this.player.getAttribute("data-stereo-max"))?parseFloat(this.player.getAttribute("data-stereo-max")):1},this.clip=a.getAttribute("data-stereo-clip")?a.getAttribute("data-stereo-clip"):!0,this.inputs={max:1,min:0},this.init=function(){b.bindEvents(),1==this.clip&&this.clipImage(),b.getDimensions(),window.onresize=b.getDimensions()},this.bindEvents=function(){this.player.addEventListener("mousemove",function(a){b.setPositions(this,a)},!1),this.player.addEventListener("touchmove",function(a){a.preventDefault(),b.setPositions(this,a.touches[0])},!1)},this.clipImage=function(){var a=Math.max(Math.abs(this.outputs.min),Math.abs(this.outputs.max)),b=-1*a+"%",c=2*a+100+"%";this.eyeLeft.style.width=c,this.eyeLeft.style.marginLeft=b,this.eyeRight.style.width=c,this.eyeRight.style.marginLeft=b},this.getDimensions=function(){b.playerHeight=b.player.clientHeight,b.playerBox=b.player.getBoundingClientRect(),b.playerOffset={top:b.playerBox.top+document.body.scrollTop,left:b.playerBox.left+document.body.scrollLeft}},this.setPositions=function(a,c){if(b.playerHeight!==a.clientHeight)return void b.getDimensions();var d=c.pageY-b.playerOffset.top,e=Math.max(Math.min(d/b.playerHeight,b.inputs.max),b.inputs.min),f=b.convert(e);b.eyeLeft.style.transform="translateX("+-1*f+"%)",b.eyeRight.style.transform="translateX("+f+"%)"},this.convert=function(a){var c=(b.inputs.max-b.inputs.min,b.outputs.max-b.outputs.min,(a-b.inputs.min)/(b.inputs.max-b.inputs.min)*(b.outputs.max-b.outputs.min)+b.outputs.min);return c}},players=document.querySelectorAll("[data-stereoplayer]"),instances=[],i=0;i<players.length;++i){var player=players[i];instances[i]=new Convergence(player).init()}