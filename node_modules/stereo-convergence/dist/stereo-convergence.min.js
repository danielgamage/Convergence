!function(a,b){"function"==typeof define&&define.amd?define([],function(){return a.StereoConvergence=b()}):"object"==typeof exports?module.exports=b():a.StereoConvergence=b()}(this,function(){var a=function(a){var b=this;this.player=a.player||document.querySelector("[data-stereo-player]"),this.eye={left:this.player.querySelector(a.left||'[data-stereo-eye="left"]'),right:this.player.querySelector(a.right||'[data-stereo-eye="right"]')},this.outputs={min:parseFloat(this.player.getAttribute("data-stereo-min"))||-1,max:parseFloat(this.player.getAttribute("data-stereo-max"))||1},this.clip=a.clip||this.player.getAttribute("data-stereo-clip")||!0,this.inputs={max:1,min:0},this.shouldRefresh=!1,this.init=function(){b.bindEvents(),b.clip===!0&&b.clipImage(),b.getDimensions()},this.handleClick=function(a){a.preventDefault();var c=a.touches?a.touches[0]:a;b.setPositions(c)},this.suggestRefresh=function(){b.shouldRefresh=!0},this.bindEvents=function(){b.player.addEventListener("mousemove",b.handleClick,!1),b.player.addEventListener("touchmove",b.handleClick,!1),window.addEventListener("resize",b.suggestRefresh,!1),window.addEventListener("scroll",b.suggestRefresh,!1)},this.destroy=function(){b.player.removeEventListener("mousemove",b.handleClick),b.player.removeEventListener("touchmove",b.handleClick),window.removeEventListener("resize",b.suggestRefresh,!1),window.removeEventListener("scroll",b.suggestRefresh,!1)},this.clipImage=function(){var a=Math.max(Math.abs(b.outputs.min),Math.abs(b.outputs.max)),c=-1*a+"%",d=2*a+100+"%";b.eye.left.style.width=d,b.eye.left.style.marginLeft=c,b.eye.right.style.width=d,b.eye.right.style.marginLeft=c},this.getDimensions=function(){b.playerHeight=b.player.clientHeight,b.playerBox=b.player.getBoundingClientRect(),b.shouldRefresh=!1},this.setPositions=function(a){b.shouldRefresh&&b.getDimensions();var c=a.clientY-b.playerBox.top,d=Math.max(Math.min(c/b.playerHeight,b.inputs.max),b.inputs.min),e=b.convert(d);b.eye.left.style.transform="translateX("+-1*e+"%)",b.eye.right.style.transform="translateX("+e+"%)"},this.convert=function(a){var c=b.inputs.max-b.inputs.min,d=b.outputs.max-b.outputs.min,e=(a-b.inputs.min)/c*d+b.outputs.min;return e}};return a});